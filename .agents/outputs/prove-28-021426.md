---
issue: 28
agent: PROVE
date: 2026-02-14
status: PASS
tests_passed: 78
tests_failed: 0
regressions: 0
full_suite_passed: 377
---

# PROVE Artifact: Issue #28 -- Tier 1 Rule-Based PDF Inspector

## Executive Summary

All 78 inspector tests pass. The full PDF test suite (377 tests) passes with zero regressions. Ruff linting reports no issues. All acceptance criteria are met. The implementation correctly evaluates 7 signals (6 per-page + 1 document-level), applies the correct decision priority (complex first, then text-native, then scanned, then borderline), and produces a `ClassificationResult` for every valid input without throwing exceptions.

## Verification Results

| Check | Result |
|-------|--------|
| `pytest test_inspector.py -v` | 78 passed in 0.09s |
| `pytest tests/ -q` (full suite) | 377 passed in 0.51s |
| `ruff check inspector.py` | All checks passed |

## Acceptance Criteria

| Criterion | Status |
|-----------|--------|
| Clean digital PDF -> TEXT_NATIVE with high confidence | PASS (TestPerPageClassification::test_text_native_all_3_signals_high_confidence, conf=0.9) |
| Scanned PDF (image-only) -> SCANNED with high confidence | PASS (TestPerPageClassification::test_scanned_all_3_signals_high_confidence, conf=0.9) |
| PDF with tables/mixed -> COMPLEX | PASS (TestPerPageClassification::test_complex_tables_only, test_complex_form_fields, etc.) |
| Mixed page types -> COMPLEX with per_page_types populated | PASS (TestDocumentLevelDisagreement::test_per_page_types_populated_on_disagreement) |
| Zero external dependencies (no LLM, no network) | PASS -- imports only logging, typing, and ingestkit_pdf internals |
| Always produces ClassificationResult (never throws for valid DocumentProfile) | PASS -- edge cases return inconclusive result (TestEmptyProfile, TestSpecialPages::test_all_pages_skippable) |
| Confidence reflects signal agreement | PASS (TestConfidenceCalculation: 3/3 signals -> 0.9, 2/3 signals -> 0.7, borderline -> 0.0, doc-level uses min) |
| Tests pass, lint passes | PASS |

## Implementation Spot-Check

Verified in `packages/ingestkit-pdf/src/ingestkit_pdf/inspector.py` (330 lines):

1. **All 7 signals evaluated**: 6 per-page signals in `_evaluate_signals()` (text_length, image_coverage, font_count, table_count, is_multi_column, has_form_fields) with both raw values and boolean evaluations (13 keys). Signal 7 (page consistency) handled in `classify()` via `distinct_types` set comparison.

2. **Decision priority correct**: `_classify_page()` checks (a) skippable page types first, (b) complex indicators (signals 4-6), (c) text-native indicators (signals 1-3), (d) scanned indicators (inverted signals 1-3), (e) borderline fallback. Complex is evaluated before text/scanned, matching spec.

3. **Document-level aggregation correct**: Skippable pages filtered out. Borderline pages trigger inconclusive. All-agree case uses min confidence. Disagree case returns COMPLEX with 0.9 confidence.

4. **Fail-closed behavior**: Empty profile returns inconclusive (COMPLEX, confidence=0.0). All-skippable returns inconclusive. Borderline pages return inconclusive. No exception paths for valid input.

## Comparison with PATCH

All PATCH claims verified. No discrepancies found.

## Recommendation

**APPROVED** -- Ready for PR.

AGENT_RETURN: .agents/outputs/prove-28-021426.md
